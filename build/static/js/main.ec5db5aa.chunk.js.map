{"version":3,"sources":["services/persons.js","Components/Filter.js","Components/Form.js","Components/DeleteButton.js","Components/Number.js","Components/Numbers.js","Components/Notification.js","App.js","index.js"],"names":["URL","axios","get","then","response","data","person","post","id","delete","put","Filter","persons","setSearchPersons","useState","searchText","setSearchText","length","console","log","useEffect","searchResult","filter","lowerCaseName","name","toLowerCase","lowerCaseText","includes","value","onChange","target","Form","setPersons","setMessage","setSuccess","newName","setNewName","newNumber","setNewNumber","isHere","find","onSubmit","event","preventDefault","personObj","number","tmpPerson","window","confirm","personsServices","map","elem","setTimeout","catch","error","type","DeleteButton","handleClick","onClick","Number","prev","deletePersonWrapper","Numbers","Notification","message","isSuccess","style","color","padding","border","App","searchPerson","initialPersons","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec5db5aa.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst URL = \"/api/persons\";\n\nconst getPersons = () => {\n  const request = axios.get(URL);\n  return request.then((response) => response.data);\n};\n\nconst postPerson = (person) => {\n  const request = axios.post(URL, person);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${URL}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst putPerson = (id, person) => {\n  const request = axios.put(`${URL}/${id}`, person);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getPersons,\n  postPerson,\n  deletePerson,\n  putPerson,\n};\n","import { logDOM } from \"@testing-library/dom\";\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst Filter = ({ persons, setSearchPersons }) => {\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [personsCounter, setPersonCounter] = useState(persons.length);\r\n\r\n  console.log(persons);\r\n  const handleSearchText = ({ target }) => {\r\n    setSearchText(target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let searchResult = persons.filter(({ name }) => {\r\n      const lowerCaseName = name.toLowerCase();\r\n      const lowerCaseText = searchText.toLowerCase();\r\n\r\n      return lowerCaseName.includes(lowerCaseText);\r\n    });\r\n\r\n    if (searchResult.length > 0) setSearchPersons(searchResult);\r\n    else setSearchPersons([]);\r\n    \r\n    setSearchText(\"\");\r\n  }, [searchText, persons]);\r\n\r\n  return <input value={searchText} onChange={handleSearchText} />;\r\n};\r\n\r\nexport default Filter;\r\n","import React, { useState } from \"react\";\r\nimport personsServices from \"../services/persons\";\r\n\r\nconst Form = ({ persons, setPersons, setMessage, setSuccess }) => {\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n\r\n  const handleNameChange = ({ target }) => setNewName(target.value);\r\n  const handleNumberChange = ({ target }) => setNewNumber(target.value);\r\n\r\n  const addNumber = (event) => {\r\n    event.preventDefault();\r\n\r\n    const personObj = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    const tmpPerson = isHere(newName);\r\n\r\n    if (tmpPerson) {\r\n      const anwer = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one ?`\r\n      );\r\n\r\n      if (anwer) {\r\n        personsServices\r\n          .putPerson(tmpPerson.id, { ...tmpPerson, number: newNumber })\r\n          .then((person) => {\r\n            setPersons(\r\n              persons.map((elem) => (elem.id !== tmpPerson.id ? elem : person))\r\n            );\r\n\r\n            setSuccess(true);\r\n            setMessage(`Edited ${newName}`);\r\n\r\n            setTimeout(() => setMessage(null), 5000);\r\n          })\r\n          .catch((error) => {\r\n            setSuccess(false);\r\n            setMessage(\r\n              `Information of ${newName} has already been removed from server`\r\n            );\r\n\r\n            setTimeout(() => setMessage(null), 5000);\r\n          });\r\n      }\r\n\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      return;\r\n    }\r\n\r\n    personsServices\r\n      .postPerson(personObj)\r\n      .then((person) => {\r\n        setPersons([...persons, person]);\r\n        setSuccess(true);\r\n        setMessage(`Added ${newName}`);\r\n\r\n        setTimeout(() => setMessage(null), 5000);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setSuccess(false);\r\n        setMessage(`Name or number cant be empty`);\r\n\r\n        setTimeout(() => setMessage(null), 5000);\r\n      });\r\n\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const isHere = (newName) => persons.find(({ name }) => name === newName);\r\n\r\n  return (\r\n    <form onSubmit={addNumber}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from \"react\";\n\nconst DeleteButton = ({ handleClick }) => (\n  <button onClick={handleClick}>Delete</button>\n);\n\nexport default DeleteButton;\n","import React from \"react\";\r\nimport DeleteButton from \"./DeleteButton\";\r\nimport personsServices from \"../services/persons\";\r\n\r\nconst Number = ({ id, name, number, setPersons }) => {\r\n  const deletePersonWrapper = (id, name) => {\r\n    return () => {\r\n      const answer = window.confirm(`Delete ${name} ?`);\r\n\r\n      if (answer) {\r\n        return personsServices.deletePerson(id).then(() => {\r\n          setPersons((prev) => prev.filter((person) => person.id !== id));\r\n        });\r\n      }\r\n    };\r\n  };\r\n\r\n  return (\r\n    <li>\r\n      {name} {number}\r\n      <DeleteButton handleClick={deletePersonWrapper(id, name)} />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Number;\r\n","import React from \"react\";\r\nimport Number from \"./Number\";\r\n\r\nconst Numbers = ({ persons, setPersons }) => (\r\n  <ul>\r\n    {persons.map(({ id, name, number }) => (\r\n      <Number\r\n        key={id}\r\n        id={id}\r\n        name={name}\r\n        number={number}\r\n        setPersons={setPersons}\r\n      />\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nexport default Numbers;\r\n","import React from \"react\";\n\nconst Notification = ({ message, isSuccess }) => {\n  if (!message) return null;\n\n  const style = {\n    color: isSuccess ? \"green\" : \"red\",\n    padding: \"1rem\",\n    border: \"1px solid green\",\n  };\n\n  return <div style={style}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useEffect, useState } from \"react\";\nimport personsServices from \"./services/persons\";\n\nimport Filter from \"./Components/Filter\";\nimport Form from \"./Components/Form\";\nimport Numbers from \"./Components/Numbers\";\nimport Notification from \"./Components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [searchPerson, setSearchPersons] = useState([]);\n  const [message, setMessage] = useState(null);\n  const [isSuccess, setSuccess] = useState(true);\n\n  const conditionalRender = () => {\n    if (searchPerson.length > 0) {\n      return <Numbers persons={searchPerson} setPersons={setPersons} />;\n    }\n\n    return null;\n  };\n\n  useEffect(() => {\n    console.log(\"Fetch data\");\n    personsServices.getPersons().then((initialPersons) => {\n      setPersons(initialPersons);\n      setSearchPersons(initialPersons);\n    });\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} isSuccess={isSuccess} />\n      <Filter persons={persons} setSearchPersons={setSearchPersons} />\n      <h3>Add a new</h3>\n      <Form\n        persons={persons}\n        setPersons={setPersons}\n        setMessage={setMessage}\n        setSuccess={setSuccess}\n      />\n      <h2>Numbers</h2>\n      {conditionalRender()}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}